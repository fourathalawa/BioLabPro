<body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
            <!-- Menu -->

            <app-sidebar></app-sidebar>

            <!-- Layout container -->
            <div class="layout-page">
                <!-- Navbar -->

                <app-headerback></app-headerback>

                <!-- / Navbar -->

                <section class="d-flex align-items-center">
                    <div class="container">
                        <div class="table" style=" text-align: center;">
                            <table style="width: 100%">
                                <tr class="tortor">
                                    <td>idAppointement</td>
                                    <td>dateAppointement</td>
                                    <td>typeAppointement</td>
                                    <td>statusAppointement</td>
                                    <td>idPatient</td>               
                                </tr>
                                <!--afficher un tableau avec la boucle for-->
                                <tr *ngFor="let p of listappointments ">
                                    <!-- <div *ngIf="p.price <= condition "> -->

                                    <td>{{p.idAppointement}}</td>
                                    <td>{{p.dateAppointement}}</td>
                                    <td>{{p.typeAppointement}}</td>
                                    <td>{{p.statusAppointement}}</td>
                                    <td>{{p.idPatient}}</td>
                                    
                                    <!--  </div>-->
                                    <!--
            DATA-BINDING
        -->
                                    <!-- <td> <button (click)="buy(p)" *ngIf="p.quantity > 0 ">buy1</button></td> -->
                                    <!--<td> <button [hidden]="p.quantity == 0"(click)="buy(p)" >buy2</button></td>-->
                                    <!--<td> <button [disabled]="p.quantity == 0"(click)="buy(p)" >buy3</button></td>-->
                                    <!--<td> <button (click)="like(p)">like</button></td>-->
                                    <!--<td> <a [routerLink]="['/detail',p.id]">detail</a></td>-->
                                    <td><a [routerLink]="['/back/appointmentsbackForm',p.idAppointement]">update</a>
                                    </td>
                                    <td> <button class="btn btn-primary"
                                            (click)="deleteAppointment(p.idAppointement)">Delete</button></td>
                                    <td> <button class="btn btn-primary" style="background-color:green;"
                                            (click)="validated(p.idAppointement)">V</button></td>
                                    <td> <button class="btn btn-primary" style="background-color:red;"
                                            (click)="notvalidated(p.idAppointement)">N/V</button></td>
                                    <td> <button class="btn btn-primary" style="background-color:gray;"
                                            (click)="notreached(p.idAppointement)">N/R</button></td>

                                </tr>
                            </table>
                        </div>
                    </div>
                </section>

                <!--stats -->
                <div style="width: 100%;" class="col-md-6 col-lg-4 col-xl-4 order-0 mb-4">
                    <div class="card h-100">
                        <div class="card-header d-flex align-items-center justify-content-between pb-0">
                            <div class="card-title mb-0">
                                <h5 class="m-0 me-2">Appointments Statistics</h5>
                                <small class="text-muted"></small>
                            </div>
                        
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3"
                                style="position: relative;">
                                <div class="d-flex flex-column align-items-center gap-1">

                                    <h2 class="mb-2">{{totalnumber}}</h2>
                                    <span>Total Appointments This month</span>
                                </div>
                                <app-doughnut-chart-appoint></app-doughnut-chart-appoint>
                                <div class="resize-triggers">
                                    <div class="expand-trigger">
                                        <div style="width: 378px; height: 139px;"></div>
                                    </div>
                                    <div class="contract-trigger"></div>
                                </div>
                            </div>
                            <ul class="p-0 m-0">
                                <li class="d-flex mb-4 pb-1">
                                    <div class="avatar flex-shrink-0 me-3">
                                        <span class="avatar-initial rounded bg-label-primary"><i
                                                class="bx bx-mobile-alt"></i></span>
                                    </div>
                                    <div
                                        class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                                        <div class="me-2">
                                            <h6 class="mb-0">validated This Month</h6>
                                            <small class="text-muted">{{numvalidated}}</small>
                                        </div>

                                    </div>
                                </li>
                                <li class="d-flex mb-4 pb-1">
                                    <div class="avatar flex-shrink-0 me-3">
                                        <span class="avatar-initial rounded bg-label-success"><i
                                                class="bx bx-closet"></i></span>
                                    </div>
                                    <div
                                        class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                                        <div class="me-2">
                                            <h6 class="mb-0">Not validated This Month</h6>
                                            <small class="text-muted">{{numnotvalidated}}</small>
                                        </div>
                                    </div>
                                </li>
                                <li class="d-flex mb-4 pb-1">
                                    <div class="avatar flex-shrink-0 me-3">
                                        <span class="avatar-initial rounded bg-label-info"><i
                                                class="bx bx-home-alt"></i></span>
                                    </div>
                                    <div
                                        class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                                        <div class="me-2">
                                            <h6 class="mb-0">Not Reached This Month</h6>
                                            <small class="text-muted">{{NotReached}}</small>
                                        </div>

                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>

                <table class="table table-hover">
                    <thead>
                      <tr>
            
                        <th scope="col">Users ID</th>
                        <th scope="col">Banned</th>
                      </tr>
                    </thead>
                    <tbody>
                        <tr class="table-danger" *ngFor="let p of listappointments ">
                            
                            
                   
                            <td >{{p.idPatient}}</td>
                            <td>{{p.isBanned}}</td>
                            
                            <!--
    DATA-BINDING
-->
                          <!-- <td> <button (click)="buy(p)" *ngIf="p.quantity > 0 ">buy1</button></td> -->
                            <!--<td> <button [hidden]="p.quantity == 0"(click)="buy(p)" >buy2</button></td>-->
                            <!--<td> <button [disabled]="p.quantity == 0"(click)="buy(p)" >buy3</button></td>-->
                            <td> <button [hidden]="p.isBanned == 1"class="btn btn-primary" style="background-color:red;"(click)="ban(p.idPatient)">Ban User</button></td>
                            <td> <button [hidden]="p.isBanned == 0" class="btn btn-primary" style="background-color:green;"(click)="unban(p.idPatient)">UnBan User</button></td>
                            <!--<td> <a [routerLink]="['/detail',p.id]">detail</a></td>-->


                        </tr>
                    </tbody>
                  </table>
                  

                <!-- Footer -->
                <footer class="content-footer footer bg-footer-theme">
                    <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                        <div class="mb-2 mb-md-0">
                            Â©
                            <script>
                                document.write(new Date().getFullYear());
                            </script>
                            , made by ESPRIT STUDENT

                        </div>
                        <div>
                            <a href="" class="footer-link me-4" target="_blank">License</a>
                            <a href="" target="_blank" class="footer-link me-4">More Themes</a>

                            <a href="" target="_blank" class="footer-link me-4">Documentation</a>

                            <a href="" target="_blank" class="footer-link me-4">Support</a>
                        </div>
                    </div>
                </footer>
                <!-- / Footer -->

                <div class="content-backdrop fade"></div>
            </div>
            <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>

    <!-- / Layout wrapper -->


    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->

</body>